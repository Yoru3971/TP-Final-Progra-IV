<h2 mat-dialog-title cdkFocusInitial>
  Pedido #{{ pedido.id }} â€” {{ pedido.emprendimiento.nombreEmprendimiento }}
</h2>

<mat-dialog-content>
  <div class="left-panel scrolleable">
    @for (detalle of pedido.viandas; track detalle.viandaId) {
    <div class="item-vianda">
      <div class="info">
        <p class="nombre">{{ detalle.nombreVianda }}</p>

        <p class="unitario">
          Precio unitario:
          <span class="precio">${{ detalle.precioUnitario }}</span>
        </p>

        <p class="cantidad">
          Cantidad: <strong>{{ detalle.cantidad }}</strong>
        </p>

        <p class="subtotal">
          Subtotal: <span class="precio">${{ detalle.subtotal }}</span>
        </p>
      </div>
    </div>
    }
  </div>

  <div class="right-panel">
    <div class="detalle-general">
      <p>
        <span class="label">Fecha de entrega:</span> {{ pedido.fechaEntrega | date : 'dd/MM/yyyy' }}
      </p>
      <p>
        <span class="label">Total:</span> <span class="precio">${{ pedido.total }}</span>
      </p>
      <p>
        <span class="label">Estado:</span>
        <span class="estado" [class]="pedido.estado.toLowerCase()">{{ pedido.estado }}</span>
      </p>
    </div>

    <div class="acciones">
      @if ((role() === 'CLIENTE') && (pedido.estado === 'PENDIENTE')) {
      <button class="btn btn-rechazar" (click)="cambiarEstadoPedido(EstadoPedido.CANCELADO)">
        CANCELAR PEDIDO
      </button>

      } @if ((role() === 'DUENO') && (pedido.estado === 'PENDIENTE')) {
      <button class="btn btn-aceptar" (click)="cambiarEstadoPedido(EstadoPedido.ACEPTADO)">
        ACEPTAR PEDIDO
      </button>
      <button class="btn btn-rechazar" (click)="cambiarEstadoPedido(EstadoPedido.RECHAZADO)">
        RECHAZAR PEDIDO
      </button>

      } @if (role() === 'CLIENTE') {
      <button class="btn" >CONTACTAR</button>
      } @if (role() === 'DUENO') {
      <button class="btn" >CONTACTAR</button>
      }

      <button mat-dialog-close class="btn btn-cancelar">CERRAR</button>
    </div>
  </div>
</mat-dialog-content>
