
<div class="filtros-container">
    
    <!-- Filtros de arriba (categorías) -->
    <div class="categorias-wrapper">
        @for (cat of categoriasDisponibles(); track cat) {
        <button 
            class="chip-categoria"
            [class.active]="categoriaSeleccionada() === cat"
            (click)="toggleCategoria(cat)">
            {{ cat }}
        </button>
        }
    </div>
    
    <!-- Filtros de abajo (nombre + vegano/vegetariano/sinTACC + precios) -->
    <div class="controles-bottom">

        <!-- Filtrar por nombre de vianda -->
        <div class="search-box" [class.filled]="busqueda()">
            
            <i class="fa-solid fa-magnifying-glass"></i>
            
            <input 
                type="text"
                placeholder="Buscar vianda..."
                [ngModel]="busqueda()"
                (ngModelChange)="onSearchInput($event)">
            
            <i class="fa-solid fa-x close-icon" 
            (click)="borrarBusqueda()"></i>
        </div>
        
        <!-- Filtrar por vegano/vegetariano/sinTACC -->
        <div class="dietary-icons" [class.bordered-group]="modo() === 'DUENO'">
            <button 
                class="icon-btn" 
                [class.active]="esSinTacc()" 
                (click)="toggleDietary('sintacc')"
                title="Sin TACC">
                <app-icon-tacc class="icon"></app-icon-tacc>
            </button>
            
            <button 
                class="icon-btn" 
                [class.active]="esVegetariano()" 
                (click)="toggleDietary('vegetariano')"
                title="Vegetariano">
                <app-icon-veggie class="icon"></app-icon-veggie>
            </button>
            
            <button 
                class="icon-btn" 
                [class.active]="esVegano()" 
                (click)="toggleDietary('vegano')"
                title="Vegano">
                <app-icon-vegan class="icon"></app-icon-vegan>
            </button>
            
        </div>
        
        <!-- Filtrar por precios mínimo y máximo -->
        <div class="price-inputs">
            
            <div class="input-wrapper" [class.filled]="precioMin()">
                <span class="currency-symbol">$</span>
                <input 
                    type="number" 
                    placeholder="Min" 
                    [ngModel]="precioMin()"
                    (ngModelChange)="updatePrecio('min', $event)">
            </div>

            <span class="separator">-</span>

            <div class="input-wrapper" [class.filled]="precioMax()">
                <span class="currency-symbol">$</span>
                <input 
                    type="number" 
                    placeholder="Max"
                    [ngModel]="precioMax()"
                    (ngModelChange)="updatePrecio('max', $event)">
            </div>

        </div>

        @if (modo() === 'DUENO') {
            <div class="segmented-control">
                <button 
                    [class.active]="filtroDisponibilidad() === 'DISPONIBLES'"
                    (click)="setDisponibilidad('DISPONIBLES')"
                    title="Ver solo disponibles">
                    <i class="fa-solid fa-check"></i>
                </button>
                
                <button 
                    [class.active]="filtroDisponibilidad() === 'NO_DISPONIBLES'"
                    (click)="setDisponibilidad('NO_DISPONIBLES')"
                    title="Ver no disponibles">
                    <i class="fa-solid fa-ban"></i>
                </button>

                <button 
                    [class.active]="filtroDisponibilidad() === 'TODAS'"
                    (click)="setDisponibilidad('TODAS')"
                    title="Ver todas">
                    Todas
                </button>
            </div>
        }
        
    </div>
</div>