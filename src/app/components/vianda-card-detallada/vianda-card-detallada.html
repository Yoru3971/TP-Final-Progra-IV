
<div class="card">

        <!-- 1. Zona de Imagen (Mitad superior) -->
        <div class="card-image-container">
            @if (vianda().imagenUrl) {
                <img [src]="vianda().imagenUrl" [alt]="vianda().nombreVianda" class="product-image">
            } @else {
                <!-- Placeholder estilo Figma (Icono Imagen) -->
                <div class="placeholder-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/>
                    </svg>
                </div>
            }
        </div>

        <!-- 2. Zona de Contenido (Mitad inferior con fondo gris) -->
        <div class="card-content">
        
        <!-- Título y Precio -->
        <div class="card-header">
            <h3 class="card-title">
                {{ vianda().nombreVianda }}
            </h3>
            <span class="card-price">
                {{ vianda().precio | currency:'ARS':'symbol-narrow':'1.0-0' }}
            </span>
        </div>

        <!-- Descripción -->
        <p class="card-description">
            {{ vianda().descripcion }}
        </p>

        <!-- 3. Footer: Iconos a la Izquierda, Acciones a la Derecha -->
        <div class="card-footer">
            
            <!-- IZQUIERDA: Iconos de Dieta -->
            <div class="diet-icons">
            
            <!-- Icono Sin TACC (Espiga tachada) -->
            @if (vianda().esSinTacc) {
                <div class="icon-badge" title="Sin TACC">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m2 22 10-10"/><path d="m16 8-4-4"/><path d="m3.47 12.53 1.53-1.53 1.53 1.53a3.5 3.5 0 0 1 0 4.94L2 22l4.53-4.53a3.5 3.5 0 0 1 4.94 0L13 19l-1.53 1.53"/><path d="M2 2 22 22"/>
                    </svg>
                </div>
            }

            <!-- Icono Vegano -->
            @if (vianda().esVegano) {
                <div class="icon-badge" title="Vegano">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M2 22c1.25-.97 6.5-5.5 6-12V6a4 4 0 0 1 4-4h0a4 4 0 0 1 4 4v4c-.5 6.5 4.75 11.03 6 12"/><path d="M16 2v4"/><path d="M8 2v4"/>
                    </svg>
                </div>
            }

            <!-- Icono Vegetariano (Hoja) -->
            @if (vianda().esVegetariano) {
                <div class="icon-badge" title="Vegetariano">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 .5 3.5-1.1 9.2A7 7 0 0 1 11 20Z"/>
                    </svg>
                </div>
            }
        </div>

            <!-- DERECHA: Acciones (Dueño vs Cliente/Invitado) -->
            <div>
            @if (esDueno()) {
                <!-- MODO DUEÑO: Botón Editar (Lápiz) -->
                <button 
                    (click)="editar.emit()"
                    class="btn-edit"
                    title="Editar plato">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/><path d="m15 5 4 4"/>
                    </svg>
                </button>

            } @else {
                <!-- MODO CLIENTE / INVITADO: Selector de Cantidad (+ -) -->
                <div class="quantity-selector">
                
                    <!-- Botón Menos -->
                    <button 
                    (click)="quitar.emit()"
                    class="btn-qty"
                    [disabled]="cantidad() <= 0">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M5 12h14"/>
                    </svg>
                    </button>

                    <!-- Número -->
                    <span class="qty-value">{{ cantidad() }}</span>

                    <!-- Botón Más -->
                    <button 
                    (click)="agregar.emit()"
                    class="btn-qty"
                    >
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M5 12h14"/><path d="M12 5v14"/>
                    </svg>
                    </button>
                </div>
                }
            </div>

        </div>
    </div>
</div>
